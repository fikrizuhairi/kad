<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Jemputan Perkahwinan ‚Äî Isma & Fikri</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root {
  --primary: #a67c52;
  --bg: #fff9f3;
}
body {
  font-family: 'Poppins', sans-serif;
  margin: 0; padding: 0;
  background: var(--bg);
  text-align: center;
  color: #333;
}
.hero {
  background: url('https://i.ibb.co/Z2RHRc3/wedding-bg.jpg') center/cover;
  color: white;
  padding: 60px 20px;
}
.hero h1 { font-family: 'Playfair Display', serif; font-size: 2em; margin: 0; }
.countdown { font-size: 1.2em; margin-top: 10px; }

.section {
  padding: 30px 20px;
}
.section h2 {
  font-family: 'Playfair Display', serif;
  color: var(--primary);
}
.gallery img {
  width: 90%; max-width: 320px;
  border-radius: 10px;
  margin: 5px;
}
.bubbles {
  display: flex; flex-direction: column; gap: 10px;
  max-width: 400px; margin: 0 auto; text-align: left;
}
.bubble {
  background: white; padding: 10px;
  border-radius: 10px; border: 1px solid #ddd;
}
.bubble .meta {
  font-weight: 600; font-size: 13px; color: #555;
}
#bottomBar {
  position: fixed; bottom: 0; left: 0; width: 100%;
  background: var(--primary); color: white;
  display: flex; justify-content: space-around; align-items: center;
  padding: 10px 0;
}
#bottomBar button {
  background: none; border: none; color: white; font-size: 16px;
}
.popup {
  display: none;
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.5);
  justify-content: center; align-items: center;
}
.popup-content {
  background: white; padding: 20px;
  border-radius: 10px; width: 90%; max-width: 400px;
}
input, textarea {
  width: 100%; padding: 8px; margin: 5px 0; border-radius: 5px; border: 1px solid #ccc;
}
button.send { background: var(--primary); color: white; padding: 10px; border: none; width: 100%; border-radius: 5px; }
</style>
</head>
<body>

<section class="hero">
  <h1>Isma & Fikri</h1>
  <p>Dengan penuh kesyukuran, kami menjemput anda ke majlis perkahwinan kami</p>
  <div class="countdown" id="countdown"></div>
</section>

<section class="section">
  <h2>Galeri</h2>
  <div class="gallery">
    <img src="https://i.ibb.co/VtvqfRm/gallery1.jpg">
    <img src="https://i.ibb.co/QcNNTZ2/gallery2.jpg">
  </div>
</section>

<section class="section">
  <h2>Ucapan & Doa Restu</h2>
  <div id="bubblesContainer" class="bubbles"></div>
</section>

<!-- Popup Ucapan -->
<div class="popup" id="popupUcapan">
  <div class="popup-content">
    <h3>Tulis Ucapan</h3>
    <input id="nama" placeholder="Nama anda">
    <textarea id="ucapan" rows="3" placeholder="Ucapan anda..."></textarea>
    <button class="send" onclick="hantarUcapan()">Hantar</button>
  </div>
</div>

<!-- Bottom Bar -->
<div id="bottomBar">
  <button onclick="bukaPopup()">üíå Ucapan</button>
  <button onclick="window.open('https://wa.me/60123456789')">üìû Hubungi</button>
  <button onclick="window.open('https://maps.google.com?q=dewan+bandar+kuantan')">üìç Lokasi</button>
</div>

<script>
const UCAPAN_URL = 'https://script.google.com/macros/s/AKfycbxtCQBrjwa83H4pwGzuvJVKaPJdWlQLX7U_PFo8G2MNx1V5RlsdGIvDCMtsJqBK2BAt/exec';

async function loadUcapan(){
  try {
    const res = await fetch(UCAPAN_URL + '?api=ucapan');
    const data = await res.json();
    const cont = document.getElementById('bubblesContainer');
    cont.innerHTML = '';
    data.items.forEach(it=>{
      const div = document.createElement('div');
      div.className = 'bubble';
      div.innerHTML = `<div class="meta">${it.nama}</div><div>${it.ucapan}</div>`;
      cont.appendChild(div);
    });
  } catch(e){ console.warn('Gagal muat ucapan', e); }
}
loadUcapan();

async function hantarUcapan(){
  const nama = document.getElementById('nama').value.trim();
  const ucapan = document.getElementById('ucapan').value.trim();
  if(!nama || !ucapan) return alert('Isi nama dan ucapan!');
  await fetch(UCAPAN_URL, {
    method: 'POST',
    headers: {'Content-Type':'application/x-www-form-urlencoded'},
    body: new URLSearchParams({nama, ucapan})
  });
  document.getElementById('popupUcapan').style.display='none';
  loadUcapan();
}

function bukaPopup(){ document.getElementById('popupUcapan').style.display='flex'; }
document.getElementById('popupUcapan').addEventListener('click', e=>{
  if(e.target.id==='popupUcapan') e.target.style.display='none';
});

// Countdown
const target = new Date("2025-12-31T00:00:00").getTime();
setInterval(()=>{
  const now = new Date().getTime();
  const dist = target - now;
  if(dist < 0) return document.getElementById('countdown').textContent = "Majlis sedang berlangsung!";
  const d = Math.floor(dist/(1000*60*60*24));
  const h = Math.floor((dist%(1000*60*60*24))/(1000*60*60));
  const m = Math.floor((dist%(1000*60*60))/60000);
  document.getElementById('countdown').textContent = `${d} hari ${h} jam ${m} minit lagi`;
},1000);
</script>
</body>
</html>
